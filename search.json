[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Receita-WS",
    "section": "",
    "text": "Para tal, ele acessa o servi√ßo web Receita WS desenvolvido na Anatel. Este por sua vez √© um encapsulamento, com cache em banco, do Servi√ßo Web Infoconv, disponibilizado pela Serpro/Receita Federal, por meio de conv√™nio firmado com a Anatel."
  },
  {
    "objectID": "index.html#instala√ß√£o",
    "href": "index.html#instala√ß√£o",
    "title": "Receita-WS",
    "section": "Instala√ß√£o",
    "text": "Instala√ß√£o\n\npython\nCaso n√£o tenha o python instalado, baixe a vers√£o para a sua plataforma neste link e siga as instru√ß√µes.\n‚ùó Alternativamente, para uma plataforma de desenvolvimento mais vers√°til recomendamos que seja instalado o miniconda, que √© uma vers√£o m√≠nima do Anaconda.\n‚ö° Para uma vers√£o otimizada do miniconda, com excelentes defaults, recomendamos ainda que seja instalado o miniforge,\n\n\nAmbiente Virtual\nPrimeiramente √© recomendado a cria√ß√£o de ambiente virtual para instalar o m√≥dulo, assim a vers√£o python deste e suas depend√™ncias n√£o afetam a instala√ß√£o do python padr√£o:\nModo 1 - Utilizando o m√≥dulo venv (dispon√≠vel em qualquer instala√ß√£o padr√£o do python3):\npython -m venv <pasta>\nDesse modo ser√° criado o ambiente virtual na <pasta>\nPara ativar o ambiente virtual:\nWindows\nUtilizando o Prompt de Comando: cmd.exe\n<pasta>\\Scripts\\activate.bat\nUtilizando o PowerShell:\n<pasta>\\Scripts\\Activate.ps1\nLinux e MacOS\nsource <pasta>/bin/activate\nModo 2 (Recomendado) - Utilizando o conda (dispon√≠vel em qualquer uma das instala√ß√µes: Anaconda | Miniconda | Miniforge):\nconda create -n <nome> python=3.10 -y\nDesse modo ser√° criado um ambiente virtual com o nome <nome> criado na pasta interna do conda.\nPara ativar o ambiente virtual conda:\nconda activate <nome>\n\n\nInstala√ß√£o do m√≥dulo receitaws\nCom o ambiente virtual criado e ativado, em qualquer um dos modos mostrados no par√°grafo anterior, basta efetuar o comando:\npython -m pip install git+https://git.anatel.gov.br/rsilva/receitaws.git\n\n‚òù Como este √© um servi√ßo de uso exclusivo na rede interna da Anatel e por logins autorizados, a instala√ß√£o √© feita diretamente pelo reposit√≥rio:"
  },
  {
    "objectID": "index.html#como-utilizar",
    "href": "index.html#como-utilizar",
    "title": "Receita-WS",
    "section": "Como utilizar",
    "text": "Como utilizar\nA biblioteca nbdev possui somente 1 m√≥dulo consultas, cuja API principal √© a fun√ß√£o requisitar_em_lote:\n\nfrom receitaws.consultas import requisitar_em_lote\n\n\nsource\n\nrequisitar_em_lote\n\n requisitar_em_lote (filename:str, cpf_usuario:str, ambiente:str='ds',\n                     origem:str=None, cache:int=36, saida:str=None)\n\nL√™ o arquivo filename com um CPF | CPNJ por linha. Faz a requisi√ß√£o no ambiente do receita-ws e salva os resultados em saida\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nfilename\nstr\n\nArquivo texto de entrada: 1 CPF | CNPJ por linha\n\n\ncpf_usuario\nstr\n\nCPF do usu√°rio requisitante\n\n\nambiente\nstr\nds\nAmbiente onde realizar a requisi√ß√£o: ds | hm | su | pd\n\n\norigem\nstr\nNone\nTexto com identifica√ß√£o da requisi√ß√£o: e.g.¬†‚ÄòTeste‚Äô\n\n\ncache\nint\n36\nTempo de expira√ß√£o do cache em meses\n\n\nsaida\nstr\nNone\nArquivo de sa√≠da da requisi√ß√£o\n\n\nReturns\nNone\n\n\n\n\n\n\n‚ö†Ô∏è Como arquivo de entrada √© esperado um arquivo texto, e.g.¬†csv | txt | tsv etc... com 1 registro por linha!\n\n\ncpf_usuario = input('Digite seu CPF para Identifica√ß√£o: ')\nrequisitar_em_lote(filename=r'D:\\Code\\receitaws\\dados\\cpf.csv', \n                     cpf_usuario=cpf_usuario, \n                     ambiente='ds',\n                     origem='Teste DS',\n                     cache=3,\n                     saida=r'D:\\Code\\receitaws\\dados\\resultados_cpf.csv')\n\nArquivo de Sa√≠da\nO formato do arquivo de sa√≠da √© automaticamente identificado pela extens√£o do argumento saida, os valores poss√≠veis s√£o csv | xlsx | html | md, para salvamento em formato tabular, ou no formato json. Caso seja fornecido uma extens√£o n√£o suportada ou n√£o seja fornecido um nome de arquivo de sa√≠da, ser√° salvo um csv na pasta onde √© feita a requisi√ß√£o.\n\nüíØ Todos os dados retornados pelo web service s√£o salvos!\n\n\nresultados = pd.read_csv(r'D:\\Code\\receitaws\\dados\\resultados_cpf.csv')\nresultados.iloc[:, 1:] # Ocultar o CPF requisitado\n\n\n\n\n\n  \n    \n      \n      nome\n      situacaoCadastral.codigo\n      situacaoCadastral.valor\n      paisResidencia.residenteExterior\n      paisResidencia.codigoPais\n      nomeMae\n      dataNascimento\n      sexo.codigo\n      sexo.valor\n      ocupacao.naturezaOcupacaoCodigo\n      ...\n      telefone.ddd\n      telefone.numero\n      unidadeAdministrativaCodigo\n      anoObito\n      estrangeiro\n      tituloEleitor\n      dataAtualizacao\n      dataRegistroAnatel\n      resultado\n      erro\n    \n  \n  \n    \n      0\n      Tuwpoxtzyzzruazdjdsqmaewylowhy\n      2\n      Suspensa\n      True\n      0\n      Sjflu Ifgemqkhdjvpgcjewylowhy\n      1937-10-25\n      1\n      Masculino\n      36\n      ...\n      25\n      31297214\n      1008514\n      0\n      False\n      0\n      1962-02-17\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      1\n      Tow Dh Vrmadfgixfxaxqupjkfp\n      8\n      Nula\n      True\n      0\n      Bvgoxicrewhewdrt\n      1917-06-28\n      2\n      Feminino\n      5\n      ...\n      25\n      97620714\n      7431014\n      0\n      False\n      0\n      1964-12-23\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      2\n      Tuwpoxtzyzzruazdjdsqmaewylowhy\n      2\n      Suspensa\n      True\n      0\n      Sjflu Ifgemqkhdjvpgcjewylowhy\n      1937-10-25\n      1\n      Masculino\n      36\n      ...\n      25\n      31297214\n      1008514\n      0\n      False\n      0\n      1962-02-17\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      3\n      Tow Dh Vrmadfgixfxaxqupjkfp\n      8\n      Nula\n      True\n      0\n      Bvgoxicrewhewdrt\n      1917-06-28\n      2\n      Feminino\n      5\n      ...\n      25\n      97620714\n      7431014\n      0\n      False\n      0\n      1964-12-23\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      4\n      Tuwpoxtzyzzruazdjdsqmaewylowhy\n      2\n      Suspensa\n      True\n      0\n      Sjflu Ifgemqkhdjvpgcjewylowhy\n      1937-10-25\n      1\n      Masculino\n      36\n      ...\n      25\n      31297214\n      1008514\n      0\n      False\n      0\n      1962-02-17\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      5\n      Tow Dh Vrmadfgixfxaxqupjkfp\n      8\n      Nula\n      True\n      0\n      Bvgoxicrewhewdrt\n      1917-06-28\n      2\n      Feminino\n      5\n      ...\n      25\n      97620714\n      7431014\n      0\n      False\n      0\n      1964-12-23\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      6\n      Tuwpoxtzyzzruazdjdsqmaewylowhy\n      2\n      Suspensa\n      True\n      0\n      Sjflu Ifgemqkhdjvpgcjewylowhy\n      1937-10-25\n      1\n      Masculino\n      36\n      ...\n      25\n      31297214\n      1008514\n      0\n      False\n      0\n      1962-02-17\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      7\n      Tow Dh Vrmadfgixfxaxqupjkfp\n      8\n      Nula\n      True\n      0\n      Bvgoxicrewhewdrt\n      1917-06-28\n      2\n      Feminino\n      5\n      ...\n      25\n      97620714\n      7431014\n      0\n      False\n      0\n      1964-12-23\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      8\n      Tuwpoxtzyzzruazdjdsqmaewylowhy\n      2\n      Suspensa\n      True\n      0\n      Sjflu Ifgemqkhdjvpgcjewylowhy\n      1937-10-25\n      1\n      Masculino\n      36\n      ...\n      25\n      31297214\n      1008514\n      0\n      False\n      0\n      1962-02-17\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n    \n      9\n      Tow Dh Vrmadfgixfxaxqupjkfp\n      8\n      Nula\n      True\n      0\n      Bvgoxicrewhewdrt\n      1917-06-28\n      2\n      Feminino\n      5\n      ...\n      25\n      97620714\n      7431014\n      0\n      False\n      0\n      1964-12-23\n      2022-08-16\n      CPF encontrado\n      NaN\n    \n  \n\n10 rows √ó 30 columns\n\n\n\nAmbientes\nA mesma requisi√ß√£o pode ser feita nos ambientes: * Desenvolvimento: ds (padr√£o) * Homologa√ß√£o: hm * Sustenta√ß√£o: su * Produ√ß√£o: pd\nTipo de Requisi√ß√£o: CPF ou CNPJ\n\nüß† O tipo de requisi√ß√£o √© automaticamente identificado pelo tamanho do identificador no arquivo:\n\n\n11 üëâ CPF\n14 üëâ CNPJ\n\nUtiliza√ß√£o do Cache em Banco\nO argumento cache √© o n√∫mero de meses que devemos considerar antes de fazer a requisi√ß√£o.\nCaso o intervalo de tempo entre a data da requisi√ß√£o e a data de atualiza√ß√£o do registro em banco corporativo for inferior ao cache, o registro do banco √© retornado em lugar de se fazer a requisi√ß√£o ao Infoconv da receita federal üòé\n\nIsso foi uma solu√ß√£o para evitar requisi√ß√µes, e por conseguinte cobran√ßas desnecess√°rias, de registros que j√° est√£o com atualiza√ß√£o recente em banco ü§ë\n\n\n\nScript em linha de comando\nA API principal requisitar_em _lote pode ser executada programaticamente em linha de comando:"
  },
  {
    "objectID": "consultas.html#classe-principal-para-requisi√ß√£o",
    "href": "consultas.html#classe-principal-para-requisi√ß√£o",
    "title": "Consultas",
    "section": "Classe Principal para Requisi√ß√£o",
    "text": "Classe Principal para Requisi√ß√£o\n\nsource\n\nRequisicao\n\n Requisicao (cpf_usuario:Union[str,int], ambiente:str='ds',\n             origem:str=None, cache:int=36)\n\nClasse para fazer requisi√ß√µes ao Web Service Receita - WS da Anatel, este encapsula o Infoconv da Receita Federal\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ncpf_usuario\nUnion\n\nCPF do usu√°rio requisitante\n\n\nambiente\nstr\nds\nAmbiente onde realizar a requisi√ß√£o: ds: desenvolvimento, hm: homologa√ß√£o, su: sustenta√ß√£o, pd: produ√ß√£o\n\n\norigem\nstr\nNone\nTexto com identifica√ß√£o da requisi√ß√£o: e.g.¬†‚ÄúTeste‚Äù\n\n\ncache\nint\n36\nTempo de expira√ß√£o do cache em meses (Produ√ß√£o)"
  },
  {
    "objectID": "consultas.html#exemplos",
    "href": "consultas.html#exemplos",
    "title": "Consultas",
    "section": "Exemplos",
    "text": "Exemplos\n\nCPF\n\nfrom fastcore.test import ExceptionExpected, test_eq\n\n\ncpf_usuario = input('Digite o CPF do solicitante: ')\nidentificador = input('Digite o CPF a ser consultado')\norigem = \"Teste REST API\"\nambiente = 'ds'\n\n\nreq = Requisicao(cpf_usuario, ambiente, origem)\n\n\nr = req.consultar(identificador)\n\n\ndel r['cpf'] # N√£o exp√µe o CPF no c√≥digo\nr\n\n{'nome': 'Tow Dh Vrmadfgixfxaxqupjkfp',\n 'situacaoCadastral.codigo': 8,\n 'situacaoCadastral.valor': 'Nula',\n 'paisResidencia.residenteExterior': True,\n 'paisResidencia.codigoPais': 0,\n 'nomeMae': 'Bvgoxicrewhewdrt',\n 'dataNascimento': '1917-06-28',\n 'sexo.codigo': 2,\n 'sexo.valor': 'Feminino',\n 'ocupacao.naturezaOcupacaoCodigo': 5,\n 'ocupacao.ocupacaoPrincipalCodigo': 966,\n 'ocupacao.exercicioOcupacao': 2736,\n 'endereco.logradouro': 'Jgp Vjfrvmytkvnnqskehmrg',\n 'endereco.numero': '098',\n 'endereco.cep': '93700734',\n 'endereco.bairro': 'Pahcjbobur',\n 'endereco.codigoMunicipio': 3519600,\n 'endereco.nomeMunicipio': 'Hobkpc',\n 'endereco.uf': 'RO',\n 'telefone.ddd': '0025',\n 'telefone.numero': '97620714',\n 'unidadeAdministrativaCodigo': '7431014',\n 'anoObito': 0,\n 'estrangeiro': False,\n 'tituloEleitor': '0000000000000',\n 'dataAtualizacao': '1964-12-23',\n 'dataRegistroAnatel': '2022-08-16',\n 'resultado': 'CPF encontrado',\n 'erro': ''}\n\n\n\ncpfs = req.consultar_em_lote([cpf_usuario, identificador])\n\n\ncpfs = cpfs.map(lambda x: {k:v for k,v in x.items() if k != 'cpf'}) # N√£o exp√µe os CPFs\n\n\ncpfs\n\n(#2) [{'nome': 'Tuwpoxtzyzzruazdjdsqmaewylowhy', 'situacaoCadastral.codigo': 2, 'situacaoCadastral.valor': 'Suspensa', 'paisResidencia.residenteExterior': True, 'paisResidencia.codigoPais': 0, 'nomeMae': 'Sjflu Ifgemqkhdjvpgcjewylowhy', 'dataNascimento': '1937-10-25', 'sexo.codigo': 1, 'sexo.valor': 'Masculino', 'ocupacao.naturezaOcupacaoCodigo': 36, 'ocupacao.ocupacaoPrincipalCodigo': 320, 'ocupacao.ocupacaoPrincipalDescricao': 'T√©cnico em biologia', 'ocupacao.exercicioOcupacao': 9236, 'endereco.logradouro': 'Viy Emmkgotopwc Yyoamytp', 'endereco.numero': '598', 'endereco.cep': '37377234', 'endereco.bairro': 'Qqukpfkgfti', 'endereco.codigoMunicipio': 2931350, 'endereco.nomeMunicipio': 'Lkgwrl', 'endereco.uf': 'SP', 'telefone.ddd': '0025', 'telefone.numero': '31297214', 'unidadeAdministrativaCodigo': '1008514', 'anoObito': 0, 'estrangeiro': False, 'tituloEleitor': '0000000000000', 'dataAtualizacao': '1962-02-17', 'dataRegistroAnatel': '2022-08-16', 'resultado': 'CPF encontrado', 'erro': ''},{'nome': 'Tow Dh Vrmadfgixfxaxqupjkfp', 'situacaoCadastral.codigo': 8, 'situacaoCadastral.valor': 'Nula', 'paisResidencia.residenteExterior': True, 'paisResidencia.codigoPais': 0, 'nomeMae': 'Bvgoxicrewhewdrt', 'dataNascimento': '1917-06-28', 'sexo.codigo': 2, 'sexo.valor': 'Feminino', 'ocupacao.naturezaOcupacaoCodigo': 5, 'ocupacao.ocupacaoPrincipalCodigo': 966, 'ocupacao.exercicioOcupacao': 2736, 'endereco.logradouro': 'Jgp Vjfrvmytkvnnqskehmrg', 'endereco.numero': '098', 'endereco.cep': '93700734', 'endereco.bairro': 'Pahcjbobur', 'endereco.codigoMunicipio': 3519600, 'endereco.nomeMunicipio': 'Hobkpc', 'endereco.uf': 'RO', 'telefone.ddd': '0025', 'telefone.numero': '97620714', 'unidadeAdministrativaCodigo': '7431014', 'anoObito': 0, 'estrangeiro': False, 'tituloEleitor': '0000000000000', 'dataAtualizacao': '1964-12-23', 'dataRegistroAnatel': '2022-08-16', 'resultado': 'CPF encontrado', 'erro': ''}]\n\n\n\npd.DataFrame(cpfs)\n\n\n\n\n\n  \n    \n      \n      nome\n      situacaoCadastral.codigo\n      situacaoCadastral.valor\n      paisResidencia.residenteExterior\n      paisResidencia.codigoPais\n      nomeMae\n      dataNascimento\n      sexo.codigo\n      sexo.valor\n      ocupacao.naturezaOcupacaoCodigo\n      ...\n      telefone.ddd\n      telefone.numero\n      unidadeAdministrativaCodigo\n      anoObito\n      estrangeiro\n      tituloEleitor\n      dataAtualizacao\n      dataRegistroAnatel\n      resultado\n      erro\n    \n  \n  \n    \n      0\n      Tuwpoxtzyzzruazdjdsqmaewylowhy\n      2\n      Suspensa\n      True\n      0\n      Sjflu Ifgemqkhdjvpgcjewylowhy\n      1937-10-25\n      1\n      Masculino\n      36\n      ...\n      0025\n      31297214\n      1008514\n      0\n      False\n      0000000000000\n      1962-02-17\n      2022-08-16\n      CPF encontrado\n      \n    \n    \n      1\n      Tow Dh Vrmadfgixfxaxqupjkfp\n      8\n      Nula\n      True\n      0\n      Bvgoxicrewhewdrt\n      1917-06-28\n      2\n      Feminino\n      5\n      ...\n      0025\n      97620714\n      7431014\n      0\n      False\n      0000000000000\n      1964-12-23\n      2022-08-16\n      CPF encontrado\n      \n    \n  \n\n2 rows √ó 30 columns\n\n\n\n\n\nCNPJ\nCNPJ somente n√∫meros\n\nreq.consultar('00280273000137')\n\n{'cnpj': '00280273000137',\n 'matriz': True,\n 'nomeEmpresarial': 'Samsung Eletronica da Amazonia Ltda',\n 'nomeFantasia': 'Samsung da Amazonia',\n 'situacaoCadastral.codigo': '02',\n 'situacaoCadastral.valor': 'Ativa',\n 'situacaoCadastral.dataAlteracao': '2005-11-03T00:00:00',\n 'naturezaJuridica.codigo': '2062',\n 'naturezaJuridica.descricao': 'SOCIEDADE EMPRESARIA LIMITADA',\n 'dataAbertura': '1994-10-31',\n 'cnaePrincipal': '2640000',\n 'cnaeSecundario': '1922599|2621300|2622100|2632900|2670102|3313999|4618402|4618499|4645101|4649401|4649402|4649499|4651601|4651602|4652400|5211799|6202300|6203100|7490199|7739002|7739099|8211300|9511800|9512600|9521500|9529199|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000|0000000',\n 'endereco.logradouro': 'Av. dos Oitis',\n 'endereco.numero': '1460',\n 'endereco.complemento': '',\n 'endereco.cep': '69007002',\n 'endereco.bairro': 'Distrito Industrial Ii',\n 'endereco.codigoMunicipio': 1302603,\n 'endereco.nomeMunicipio': 'MANAUS',\n 'endereco.uf': 'AM',\n 'telefone1.ddd': '11',\n 'telefone1.numero': '56442800',\n 'telefone2.ddd': '11',\n 'telefone2.numero': '56442700',\n 'email': 'CLEIDE.NERI@SAMSUNG.COM',\n 'responsavel.cpf': '70294986235',\n 'capitalSocial': '00103840844446',\n 'porte.codigo': 5,\n 'porte.valor': 'Demais',\n 'opcaoSimples.opcaoSimples': False,\n 'sociedade.socio': [],\n 'dataRegistroAnatel': '2020-01-19',\n 'resultado': 'CNPJ encontrado',\n 'erro': ''}\n\n\nCNPJ com separadores\n\nreq.consultar('02.030.715/0001-12')\n\n{'cnpj': '02030715000112',\n 'matriz': True,\n 'nomeEmpresarial': 'H Qyccquxlammrnsnssjydjvwdhlqqhjeaee',\n 'nomeFantasia': 'Fwcfey',\n 'situacaoCadastral.codigo': '03',\n 'situacaoCadastral.valor': 'Suspensa',\n 'situacaoCadastral.dataAlteracao': '1938-07-30T00:00:00',\n 'naturezaJuridica.codigo': '3525',\n 'dataAbertura': '1906-03-01',\n 'cnaePrincipal': '9755621',\n 'endereco.logradouro': 'Vccqrn H Dctuseqytj8jgkmthhqu[m)oxrvu',\n 'endereco.numero': '31',\n 'endereco.complemento': \"Luug'mettlqhh'\",\n 'endereco.cep': '81312361',\n 'endereco.bairro': 'Ixjxeuy',\n 'endereco.codigoMunicipio': 4301073,\n 'endereco.nomeMunicipio': 'Ezfakyin',\n 'endereco.uf': 'ES',\n 'telefone1.ddd': '82',\n 'telefone1.numero': '34464555',\n 'telefone2.ddd': '82',\n 'telefone2.numero': '34463374',\n 'email': \"rohyx'rgqowo<lxx,bd\",\n 'responsavel.cpf': '50368609502',\n 'responsavel.nome': 'Phj Bg Lzdnugmeinpqdrv',\n 'capitalSocial': '1',\n 'porte.codigo': 3,\n 'porte.valor': 'Empresa de pequeno porte',\n 'opcaoSimples.opcaoSimples': False,\n 'contador.classificacaoCrcContadorPj': {'codigo': 1, 'valor': 'Profissional'},\n 'contador.numeroCrcContadorPj': '342421',\n 'contador.cnpjContador': '48250611342422',\n 'contador.classficacaoCrcContadorPf': {'codigo': 1, 'valor': 'Profissional'},\n 'contador.numeroCrcContadorPf': '232131',\n 'contador.cpfContador': '13122131242',\n 'sociedade.socio': [],\n 'dataRegistroAnatel': '2022-09-14',\n 'resultado': 'CNPJ encontrado',\n 'erro': ''}\n\n\n\n\nAPI para consulta em lote\n\nsource\n\n\nrequisitar_em_lote\n\n requisitar_em_lote (filename:str, cpf_usuario:str, ambiente:str='ds',\n                     origem:str=None, cache:int=36, saida:str=None)\n\nL√™ o arquivo filename com um CPF | CPNJ por linha. Faz a requisi√ß√£o no ambiente do receita-ws e salva os resultados em saida\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nfilename\nstr\n\nArquivo texto de entrada: 1 CPF | CNPJ por linha\n\n\ncpf_usuario\nstr\n\nCPF do usu√°rio requisitante\n\n\nambiente\nstr\nds\nAmbiente onde realizar a requisi√ß√£o: ds | hm | su | pd\n\n\norigem\nstr\nNone\nTexto com identifica√ß√£o da requisi√ß√£o: e.g.¬†‚ÄòTeste‚Äô\n\n\ncache\nint\n36\nTempo de expira√ß√£o do cache em meses\n\n\nsaida\nstr\nNone\nArquivo de sa√≠da da requisi√ß√£o\n\n\nReturns\nNone\n\n\n\n\n\n\nsource\n\n\nsalvar_requisicao\n\n salvar_requisicao (results:Iterable, saida:str)\n\nSalva a lista de requisi√ß√µes results no arquivo saida\n\n\n\n\nType\nDetails\n\n\n\n\nresults\nIterable\nLista com o retorno das requisi√ß√µes\n\n\nsaida\nstr\nNome do Arquivo de Sa√≠da\n\n\nReturns\nNone"
  },
  {
    "objectID": "consultas.html#testes-unit√°rios",
    "href": "consultas.html#testes-unit√°rios",
    "title": "Consultas",
    "section": "Testes Unit√°rios",
    "text": "Testes Unit√°rios\nSem string de identifica√ß√£o origem\n\nwith ExceptionExpected(ex=AssertionError, regex= 'origem n√£o pode ficar vazio e deve ser uma string de at√© 30 caracteres'):\n    Requisicao(cpf_usuario=cpf_usuario)\n\norigem n√£o √© uma string\n\nwith ExceptionExpected(ex=AssertionError, regex= 'origem n√£o pode ficar vazio e deve ser uma string de at√© 30 caracteres'):\n    Requisicao(cpf_usuario=cpf_usuario, origem = 50)\n\nambiente inv√°lido\n\nwith ExceptionExpected(ex=AssertionError, regex=\"Ambiente inv√°lido\"):\n    Requisicao(cpf_usuario=cpf_usuario, origem='Teste', ambiente='ts')\n\nTeste de formata√ß√£o da url corretamente de acordo com o ambiente\n\norigem = 'Teste'\nfor ambiente in AMBIENTE:\n    req = Requisicao(cpf_usuario=cpf_usuario, origem=origem, ambiente=ambiente)\n    url = req.formatar_url(identificador)\n    if ambiente == 'pd': \n        ambiente = ''\n    test_eq(url, f'http://webservicesintranet{ambiente}.anatel.gov.br/receita/rest/obterPessoaFisicaIgnoraCacheAntigo?cpf={identificador}&cpfUsuario={cpf_usuario}&mesesExpiraCache=36&origem={origem}')\n\nTeste de ambientes x tipos de requisi√ß√£o\n\nfrom itertools import product\norigem = 'Teste'\ncache = 3\nfor (ambiente, tipo) in product(AMBIENTE, TIPO):\n    req = Requisicao(cpf_usuario=cpf_usuario,\n                  ambiente=ambiente, \n                  origem=origem, \n                  cache=cache)\n    id_ = identificador if tipo == 'cpf' else '02030715000112'\n    url = req.formatar_url(id_)\n    if ambiente == 'pd': \n        ambiente = ''\n    test_eq(url, f'http://webservicesintranet{ambiente}.anatel.gov.br/receita/rest/{TIPO[tipo]}IgnoraCacheAntigo?{tipo}={id_}&cpfUsuario={cpf_usuario}&mesesExpiraCache={cache}&origem={origem}')\n\n\norigem = 'Teste'\ncache = None\nfor (ambiente, tipo) in product(AMBIENTE, TIPO):\n    req = Requisicao(cpf_usuario=cpf_usuario,\n                  ambiente=ambiente, \n                  origem=origem, \n                  cache=cache)\n    id_ = identificador if tipo == 'cpf' else '02030715000112'\n    url = req.formatar_url(id_)\n    if ambiente == 'pd': \n        ambiente = ''\n    test_eq(url, f'http://webservicesintranet{ambiente}.anatel.gov.br/receita/rest/{TIPO[tipo]}?{tipo}={id_}&cpfUsuario={cpf_usuario}&origem={origem}')"
  }
]